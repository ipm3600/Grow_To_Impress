{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import axios from'axios';import'../styles/StoryDetail.css';import api from'../axiosConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StoryDetail(){const{id}=useParams();// Get the story ID from the route parameters\nconst[story,setStory]=useState(null);// State to store the story details\nconst[showDropdown,setShowDropdown]=useState(false);// State to manage dropdown visibility for logout\nconst navigate=useNavigate();// Fetch the story details when the component mounts or when the ID changes\nuseEffect(()=>{const fetchStory=async()=>{try{const response=await axios.get(`/story/${id}`);// Fetch story by ID\nconsole.log(\"Story data:\",response.data);// Log response data\nsetStory(response.data);// Set the story data\n}catch(error){console.error(\"Failed to fetch story\",error);// Handle errors in fetching\n}};fetchStory();},[id]);// Handle user logout\nconst handleLogout=async()=>{try{await api.get('/logout');// Send a request to the backend logout endpoint\nnavigate('/login');// Redirect to login page\n}catch(error){console.error('Logout failed:',error);// Log any errors\n}};// Display loading message if story is not yet loaded\nif(!story)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading story...\"});// Extract image URL if available\nconst imageUrl=story.image?story.image:null;return/*#__PURE__*/_jsxs(\"div\",{className:\"story-detail-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/grow_to_impress_logo.png\",alt:\"logo\",className:\"logo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/how-to-section\",className:\"nav-link\",children:\"LEARN HOW TO\"}),/*#__PURE__*/_jsx(Link,{to:\"/chatbot\",className:\"nav-link\",children:\"IXIA\"}),/*#__PURE__*/_jsx(Link,{to:\"/resources\",className:\"nav-link\",children:\"GUIDES\"}),/*#__PURE__*/_jsx(Link,{to:\"/stories\",className:\"nav-link active\",children:\"STORIES OF INSPIRATION\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"three-dots-menu\",onClick:()=>setShowDropdown(!showDropdown),children:\"\\u22EE \"}),showDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"dropdown-link\",children:\"Logout\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"story-detail-container\",children:[imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"User submitted\"}),\" \",/*#__PURE__*/_jsx(\"h1\",{children:story.name}),\" \",/*#__PURE__*/_jsx(\"p\",{children:story.story}),\" \"]})]});}export default StoryDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","useNavigate","axios","api","jsx","_jsx","jsxs","_jsxs","StoryDetail","id","story","setStory","showDropdown","setShowDropdown","navigate","fetchStory","response","get","console","log","data","error","handleLogout","children","imageUrl","image","className","to","src","alt","onClick","name"],"sources":["/home/user/growtoimpress/src/frontend/src/components/StoryDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'; \nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../styles/StoryDetail.css';\nimport api from '../axiosConfig';\n\nfunction StoryDetail() {\n  const { id } = useParams(); // Get the story ID from the route parameters\n  const [story, setStory] = useState(null); // State to store the story details\n  const [showDropdown, setShowDropdown] = useState(false); // State to manage dropdown visibility for logout\n  const navigate = useNavigate();\n\n  // Fetch the story details when the component mounts or when the ID changes\n  useEffect(() => {\n    const fetchStory = async () => {\n      try {\n        const response = await axios.get(`/story/${id}`); // Fetch story by ID\n        console.log(\"Story data:\", response.data); // Log response data\n        setStory(response.data); // Set the story data\n      } catch (error) {\n        console.error(\"Failed to fetch story\", error); // Handle errors in fetching\n      }\n    };\n    fetchStory();\n  }, [id]);\n\n  // Handle user logout\n  const handleLogout = async () => {\n    try {\n        await api.get('/logout'); // Send a request to the backend logout endpoint\n        navigate('/login'); // Redirect to login page\n    } catch (error) {\n        console.error('Logout failed:', error); // Log any errors\n    }\n  };\n\n  // Display loading message if story is not yet loaded\n  if (!story) return <p>Loading story...</p>;\n\n  // Extract image URL if available\n  const imageUrl = story.image ? story.image : null;\n\n  return (\n    <div className=\"story-detail-page\">\n      {/* Navbar */}\n      <header className=\"navbar\">\n       <Link to=\"/home\"><img src=\"/grow_to_impress_logo.png\" alt=\"logo\" className=\"logo\" /></Link>\n       <div className=\"navbar-links\">\n          <Link to=\"/how-to-section\" className=\"nav-link\">LEARN HOW TO</Link>\n          <Link to=\"/chatbot\" className=\"nav-link\">IXIA</Link>\n          <Link to=\"/resources\" className=\"nav-link\">GUIDES</Link>\n          <Link to=\"/stories\" className=\"nav-link active\">STORIES OF INSPIRATION</Link>\n        </div>\n        <div className=\"three-dots-menu\" onClick={() => setShowDropdown(!showDropdown)}>\n          &#x22EE; {/* Vertical ellipsis (three dots) */}\n        </div>\n        {showDropdown && (\n          <div className=\"dropdown-menu\">\n            <button onClick={handleLogout} className=\"dropdown-link\">Logout</button>\n          </div>\n        )}\n      </header>\n      \n      {/* Story Details */}\n      <div className=\"story-detail-container\">\n        {imageUrl && <img src={imageUrl} alt=\"User submitted\" />} {/* Display image if available */}\n        <h1>{story.name}</h1> {/* Display story author's name */}\n        <p>{story.story}</p> {/* Display full story text */}\n      </div>\n    </div>\n  );\n}\n\nexport default StoryDetail;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,2BAA2B,CAClC,MAAO,CAAAC,GAAG,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAAEC,EAAG,CAAC,CAAGV,SAAS,CAAC,CAAC,CAAE;AAC5B,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC1C,KAAM,CAACc,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAAE;AACzD,KAAM,CAAAgB,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B;AACAJ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACe,GAAG,CAAC,UAAUR,EAAE,EAAE,CAAC,CAAE;AAClDS,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEH,QAAQ,CAACI,IAAI,CAAC,CAAE;AAC3CT,QAAQ,CAACK,QAAQ,CAACI,IAAI,CAAC,CAAE;AAC3B,CAAE,MAAOC,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAAE;AACjD,CACF,CAAC,CACDN,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACN,EAAE,CAAC,CAAC,CAER;AACA,KAAM,CAAAa,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACA,KAAM,CAAAnB,GAAG,CAACc,GAAG,CAAC,SAAS,CAAC,CAAE;AAC1BH,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACxB,CAAE,MAAOO,KAAK,CAAE,CACZH,OAAO,CAACG,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CAAE;AAC5C,CACF,CAAC,CAED;AACA,GAAI,CAACX,KAAK,CAAE,mBAAOL,IAAA,MAAAkB,QAAA,CAAG,kBAAgB,CAAG,CAAC,CAE1C;AACA,KAAM,CAAAC,QAAQ,CAAGd,KAAK,CAACe,KAAK,CAAGf,KAAK,CAACe,KAAK,CAAG,IAAI,CAEjD,mBACElB,KAAA,QAAKmB,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAEhChB,KAAA,WAAQmB,SAAS,CAAC,QAAQ,CAAAH,QAAA,eACzBlB,IAAA,CAACL,IAAI,EAAC2B,EAAE,CAAC,OAAO,CAAAJ,QAAA,cAAClB,IAAA,QAAKuB,GAAG,CAAC,2BAA2B,CAACC,GAAG,CAAC,MAAM,CAACH,SAAS,CAAC,MAAM,CAAE,CAAC,CAAM,CAAC,cAC3FnB,KAAA,QAAKmB,SAAS,CAAC,cAAc,CAAAH,QAAA,eAC1BlB,IAAA,CAACL,IAAI,EAAC2B,EAAE,CAAC,iBAAiB,CAACD,SAAS,CAAC,UAAU,CAAAH,QAAA,CAAC,cAAY,CAAM,CAAC,cACnElB,IAAA,CAACL,IAAI,EAAC2B,EAAE,CAAC,UAAU,CAACD,SAAS,CAAC,UAAU,CAAAH,QAAA,CAAC,MAAI,CAAM,CAAC,cACpDlB,IAAA,CAACL,IAAI,EAAC2B,EAAE,CAAC,YAAY,CAACD,SAAS,CAAC,UAAU,CAAAH,QAAA,CAAC,QAAM,CAAM,CAAC,cACxDlB,IAAA,CAACL,IAAI,EAAC2B,EAAE,CAAC,UAAU,CAACD,SAAS,CAAC,iBAAiB,CAAAH,QAAA,CAAC,wBAAsB,CAAM,CAAC,EAC1E,CAAC,cACNlB,IAAA,QAAKqB,SAAS,CAAC,iBAAiB,CAACI,OAAO,CAAEA,CAAA,GAAMjB,eAAe,CAAC,CAACD,YAAY,CAAE,CAAAW,QAAA,CAAC,SACrE,CACN,CAAC,CACLX,YAAY,eACXP,IAAA,QAAKqB,SAAS,CAAC,eAAe,CAAAH,QAAA,cAC5BlB,IAAA,WAAQyB,OAAO,CAAER,YAAa,CAACI,SAAS,CAAC,eAAe,CAAAH,QAAA,CAAC,QAAM,CAAQ,CAAC,CACrE,CACN,EACK,CAAC,cAGThB,KAAA,QAAKmB,SAAS,CAAC,wBAAwB,CAAAH,QAAA,EACpCC,QAAQ,eAAInB,IAAA,QAAKuB,GAAG,CAAEJ,QAAS,CAACK,GAAG,CAAC,gBAAgB,CAAE,CAAC,CAAC,GAAC,cAC1DxB,IAAA,OAAAkB,QAAA,CAAKb,KAAK,CAACqB,IAAI,CAAK,CAAC,IAAC,cACtB1B,IAAA,MAAAkB,QAAA,CAAIb,KAAK,CAACA,KAAK,CAAI,CAAC,IAAC,EAClB,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}